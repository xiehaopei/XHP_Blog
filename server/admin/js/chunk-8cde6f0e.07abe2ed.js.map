{"version":3,"sources":["webpack:///./src/views/setting.vue?4235","webpack:///./src/views/setting.vue?d61d","webpack:///src/views/setting.vue","webpack:///./src/views/setting.vue?5403","webpack:///./src/views/setting.vue","webpack:///./src/assets/cover.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","modifiers","_m","ref","attrs","form","_l","formList","item","index","key","staticClass","avatarUpload","avatar","model","callback","$$v","$set","upload_type","staticStyle","_e","placeholder","show","email","on","emailChange","_v","slot","v","k","i","coverUpload","cover","password","onSubmit","staticRenderFns","image","title","describe","date","link","color","icp_txt","icp_link","bg_mood","bg_letter","bg_subscribe","bg_about","upload_oss","bg","fullscreenLoading","watch","$info","val","Object","keys","length","update","immediate","computed","$data","info","methods","some","$message","error","result","$http","post","data","status","img","upload","reduce","total","url","push","Promise","resolve","reject","append","JSON","stringify","formData","then","res","type","catch","err","all","map","setTimeout","message","$store","commit","body","$router","e","file","raw","includes","FormData","URL","createObjectURL","component","module","exports"],"mappings":"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","file":"js/chunk-8cde6f0e.07abe2ed.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./setting.vue?vue&type=style&index=0&id=3724e8f7&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./setting.vue?vue&type=style&index=0&id=3724e8f7&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading.fullscreen.lock\",value:(_vm.fullscreenLoading),expression:\"fullscreenLoading\",modifiers:{\"fullscreen\":true,\"lock\":true}}]},[_vm._m(0),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"100px\"}},[_vm._l((_vm.formList[0]),function(item,index){return [_c('el-form-item',{key:index,attrs:{\"label\":item.value}},[(item.key == 'avatar')?[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"\",\"auto-upload\":false,\"show-file-list\":false,\"on-change\":_vm.avatarUpload}},[(_vm.avatar['url'] || _vm.form.avatar)?_c('img',{attrs:{\"src\":_vm.avatar['url'] || _vm.form.avatar}}):_c('i',{staticClass:\"el-icon-user\"})])]:(item.key == 'upload_type')?[_c('el-radio-group',{model:{value:(_vm.form.upload_type),callback:function ($$v) {_vm.$set(_vm.form, \"upload_type\", $$v)},expression:\"form.upload_type\"}},[_c('el-radio',{attrs:{\"label\":\"服务器\"}}),_c('el-radio',{attrs:{\"label\":\"阿里云OSS\"}})],1),(_vm.form.upload_type == '阿里云OSS')?[_vm._l((_vm.formList[3]),function(item,index){return [_c('el-input',{key:index,staticStyle:{\"margin-top\":\"10px\"},attrs:{\"placeholder\":item == 'domain' ? '自定义图片域名, 需解析至oss (http://img.baidu.com)' : item},model:{value:(_vm.form['upload_oss'][item]),callback:function ($$v) {_vm.$set(_vm.form['upload_oss'], item, $$v)},expression:\"form['upload_oss'][item]\"}})]})]:_vm._e()]:[_c('el-input',{attrs:{\"placeholder\":item.placeholder},model:{value:(_vm.form[item.key]),callback:function ($$v) {_vm.$set(_vm.form, item.key, $$v)},expression:\"form[item.key]\"}})]],2)]}),_vm._l((_vm.formList[1]),function(item,index){return [(!item.show)?_c('el-form-item',{key:index + 999,attrs:{\"label\":item.value}},[(item.key == 'mode')?[_c('el-radio-group',{model:{value:(_vm.form.email['mode']),callback:function ($$v) {_vm.$set(_vm.form.email, 'mode', $$v)},expression:\"form.email['mode']\"}},[_c('el-radio',{attrs:{\"label\":\"QQ\"}}),_c('el-radio',{attrs:{\"label\":\"163\"}})],1)]:(item.key == 'comment')?[_c('el-switch',{on:{\"change\":_vm.emailChange},model:{value:(_vm.form.email['comment']),callback:function ($$v) {_vm.$set(_vm.form.email, 'comment', $$v)},expression:\"form.email['comment']\"}})]:(item.key == 'subscribe')?[_c('el-switch',{on:{\"change\":_vm.emailChange},model:{value:(_vm.form.email['subscribe']),callback:function ($$v) {_vm.$set(_vm.form.email, 'subscribe', $$v)},expression:\"form.email['subscribe']\"}})]:[_c('el-input',{attrs:{\"placeholder\":item.placeholder},model:{value:(_vm.form.email[item.key]),callback:function ($$v) {_vm.$set(_vm.form.email, item.key, $$v)},expression:\"form.email[item.key]\"}})]],2):_vm._e()]}),_c('h2',{staticClass:\"tit hint-tit\"},[_vm._v(\"首屏效果 \"),_c('el-popover',{attrs:{\"placement\":\"top-start\",\"width\":\"300\",\"trigger\":\"hover\"}},[_c('p',[_vm._v(\"背景颜色请选择类似图片颜色的透明度\")]),_c('img',{attrs:{\"src\":require(\"../assets/cover.png\")}}),_c('span',{attrs:{\"slot\":\"reference\"},slot:\"reference\"},[_vm._v(\"(view)\")])])],1),_vm._l((_vm.formList[2]),function(v,k,i){return [_c('el-form-item',{key:i+22,attrs:{\"label\":v}},[(k == 'image')?[_c('el-upload',{staticClass:\"cover\",attrs:{\"action\":\"\",\"auto-upload\":false,\"show-file-list\":false,\"on-change\":_vm.coverUpload}},[(_vm.cover['url'] || _vm.form.cover['image'])?_c('img',{attrs:{\"src\":_vm.cover['url'] || _vm.form.cover['image']}}):_c('i',{staticClass:\"el-icon-plus\"})]),_c('span',{staticClass:\"upload-image-size\"},[_vm._v(\"(1920*1080)\")])]:(k == 'link')?[_c('el-input',{attrs:{\"placeholder\":\"必填, 前台才能正常访问\"},model:{value:(_vm.form['cover'][k]),callback:function ($$v) {_vm.$set(_vm.form['cover'], k, $$v)},expression:\"form['cover'][k]\"}})]:(k == 'color')?[_c('el-color-picker',{attrs:{\"show-alpha\":\"\"},model:{value:(_vm.form['cover']['color']),callback:function ($$v) {_vm.$set(_vm.form['cover'], 'color', $$v)},expression:\"form['cover']['color']\"}})]:(k == 'icp_txt' || k == 'icp_link')?[_c('el-input',{attrs:{\"placeholder\":\"网站的备案信息, 有则填写\"},model:{value:(_vm.form['cover'][k]),callback:function ($$v) {_vm.$set(_vm.form['cover'], k, $$v)},expression:\"form['cover'][k]\"}})]:[_c('el-input',{attrs:{\"placeholder\":\"必填, 前台才能正常访问\"},model:{value:(_vm.form['cover'][k]),callback:function ($$v) {_vm.$set(_vm.form['cover'], k, $$v)},expression:\"form['cover'][k]\"}})]],2)]}),_c('h2',{staticClass:\"tit\"},[_vm._v(\"页面音乐\")]),_vm._l((_vm.formList[4]),function(v,k,i){return [_c('el-form-item',{key:i+222,attrs:{\"label\":v}},[_c('el-input',{attrs:{\"placeholder\":\"各个页面的背景音乐链接地址\"},model:{value:(_vm.form['bg'][k]),callback:function ($$v) {_vm.$set(_vm.form['bg'], k, $$v)},expression:\"form['bg'][k]\"}})],1)]}),_c('h2',{staticClass:\"tit\"},[_vm._v(\"修改密码\")]),_c('el-form-item',{attrs:{\"label\":\"原密码\"}},[_c('el-input',{model:{value:(_vm.password.one),callback:function ($$v) {_vm.$set(_vm.password, \"one\", $$v)},expression:\"password.one\"}})],1),_c('el-form-item',{attrs:{\"label\":\"新密码\"}},[_c('el-input',{model:{value:(_vm.password.two),callback:function ($$v) {_vm.$set(_vm.password, \"two\", $$v)},expression:\"password.two\"}})],1),_c('el-form-item',[_c('el-button',{staticClass:\"submit\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"立即保存\")]),_c('span',{staticClass:\"hint\"},[_c('i',{staticClass:\"el-icon-warning\"}),_vm._v(\"信息需填写完整才能正常使用\")])],1)],2)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header\"},[_c('h2',{staticClass:\"tit\"},[_vm._v(\"网站信息\")])])}]\n\nexport { render, staticRenderFns }","<template>\n    <div v-loading.fullscreen.lock=\"fullscreenLoading\">\n        <div class=\"header\">\n            <h2 class=\"tit\">网站信息</h2>\n        </div>\n        <el-form ref=\"form\" :model=\"form\" label-width=\"100px\">\n\n            <template v-for=\"(item, index) in formList[0]\">\n                <el-form-item :label=\"item.value\" :key=\"index\">\n                    \n                    <template v-if=\"item.key == 'avatar'\">\n                        <el-upload\n                            action=\"\"\n                            class=\"avatar-uploader\"\n                            :auto-upload=\"false\"\n                            :show-file-list=\"false\"\n                            :on-change=\"avatarUpload\"\n                        >\n                            <img v-if=\"avatar['url'] || form.avatar\" :src=\"avatar['url'] || form.avatar\">\n                            <i v-else class=\"el-icon-user\"></i>\n                        </el-upload>\n                    </template>\n\n                    <template v-else-if=\"item.key == 'upload_type'\">\n                        <el-radio-group v-model=\"form.upload_type\">\n                            <el-radio label=\"服务器\"></el-radio>\n                            <el-radio label=\"阿里云OSS\"></el-radio>\n                        </el-radio-group>\n                        <template v-if=\"form.upload_type == '阿里云OSS'\">\n                            <template v-for=\"(item, index) in formList[3]\">\n                                <el-input \n                                    v-model=\"form['upload_oss'][item]\" \n                                    :placeholder=\"item == 'domain' ? '自定义图片域名, 需解析至oss (http://img.baidu.com)' : item\" \n                                    :key=\"index\"\n                                    style=\"margin-top:10px;\"\n                                ></el-input>\n                            </template>\n                        </template>\n                    </template>\n\n                    <template v-else>\n                        <el-input v-model=\"form[item.key]\" :placeholder=\"item.placeholder\"></el-input>\n                    </template>\n                </el-form-item> \n\n            </template>\n\n            <!-- 邮箱 -->\n            <template v-for=\"(item, index) in formList[1]\">\n                <el-form-item :label=\"item.value\" v-if=\"!item.show\" :key=\"index + 999\">\n\n                    <template v-if=\"item.key == 'mode'\">\n                        <el-radio-group v-model=\"form.email['mode']\">\n                            <el-radio label=\"QQ\"></el-radio>\n                            <el-radio label=\"163\"></el-radio>\n                        </el-radio-group>\n                    </template>\n\n                    <template v-else-if=\"item.key == 'comment'\">\n                        <el-switch @change=\"emailChange\" v-model=\"form.email['comment']\"></el-switch>\n                    </template>\n\n                    <template v-else-if=\"item.key == 'subscribe'\">\n                        <el-switch @change=\"emailChange\" v-model=\"form.email['subscribe']\"></el-switch>\n                    </template>\n\n                    <template v-else>\n                        <el-input v-model=\"form.email[item.key]\" :placeholder=\"item.placeholder\"></el-input>\n                    </template>\n\n                </el-form-item> \n            </template>\n\n            <h2 class=\"tit hint-tit\">首屏效果 \n                  <el-popover\n                    placement=\"top-start\"\n                    width=\"300\"\n                    trigger=\"hover\"\n                >\n                    <p>背景颜色请选择类似图片颜色的透明度</p>\n                    <img src=\"../assets/cover.png\">\n                    <span slot=\"reference\">(view)</span>\n                </el-popover>\n            </h2>\n\n            <template v-for=\"(v, k, i) in formList[2]\">\n\n                <el-form-item :label=\"v\" :key=\"i+22\">\n\n                    <template v-if=\"k == 'image'\">\n                        <el-upload\n                            action=\"\"\n                            class=\"cover\"\n                            :auto-upload=\"false\"\n                            :show-file-list=\"false\"\n                            :on-change=\"coverUpload\"\n                        >\n                            <img v-if=\"cover['url'] || form.cover['image']\" :src=\"cover['url'] || form.cover['image']\">\n                            <i v-else class=\"el-icon-plus\"></i>\n                        </el-upload>\n                        <span class=\"upload-image-size\">(1920*1080)</span>\n                    </template>\n                    \n                    <template v-else-if=\"k == 'link'\">\n                        <el-input v-model=\"form['cover'][k]\" placeholder=\"必填, 前台才能正常访问\"></el-input>\n                    </template>\n\n                    <template v-else-if=\"k == 'color'\">\n                        <el-color-picker v-model=\"form['cover']['color']\" show-alpha></el-color-picker>\n                    </template>\n\n                    <template v-else-if=\"k == 'icp_txt' || k == 'icp_link'\">\n                        <el-input v-model=\"form['cover'][k]\" placeholder=\"网站的备案信息, 有则填写\"></el-input>\n                    </template>\n\n                    <template v-else>\n                        <el-input v-model=\"form['cover'][k]\" placeholder=\"必填, 前台才能正常访问\"></el-input>\n                    </template>\n                </el-form-item>\n\n            </template>\n\n            <h2 class=\"tit\">页面音乐</h2>\n\n            <template v-for=\"(v, k, i) in formList[4]\">\n                <el-form-item :label=\"v\" :key=\"i+222\">\n                    <el-input v-model=\"form['bg'][k]\" placeholder=\"各个页面的背景音乐链接地址\"></el-input>\n                </el-form-item>\n            </template>\n\n            <h2 class=\"tit\">修改密码</h2>\n\n            <el-form-item label=\"原密码\">\n                <el-input v-model=\"password.one\"></el-input>\n            </el-form-item>\n\n            <el-form-item label=\"新密码\">\n                <el-input v-model=\"password.two\"></el-input>\n            </el-form-item>\n\n            <el-form-item>\n                <el-button class=\"submit\" type=\"primary\" @click=\"onSubmit\">立即保存</el-button>\n                <span class=\"hint\"><i class=\"el-icon-warning\"></i>信息需填写完整才能正常使用</span>\n            </el-form-item>\n        </el-form>\n    </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nexport default {\n    data() {\n        return {\n            avatar: {},\n            cover: {},\n            formList: [\n                [\n                    {\n                        key: 'avatar',\n                        value: '管理员头像'\n                    },\n                    {\n                        key: 'name',\n                        value: '管理员昵称'\n                    },\n                    {\n                        key: 'web_name',\n                        value: '网站昵称',\n                        placeholder: '前台网站的网站名'\n                    },\n                    {\n                        key: 'address',\n                        value: '网站地址',\n                        placeholder: '网站的域名, 例如 http://baidu.com'\n                    },\n                    {\n                        key: 'web_describe',\n                        value: '网站描述'\n                    },\n                    {\n                        key: 'web_seo',\n                        value: 'SEO关键词'\n                    },\n                    {\n                        key: 'upload_type',\n                        value: '文件上传'\n                    },\n                ],\n                [\n                    {\n                        key: 'mode',\n                        value: '邮箱类型',\n                        placeholder: '管理员评论的邮箱, 必填',\n                    },\n                    {\n                        key: 'address',\n                        value: '评论邮箱',\n                        placeholder: '管理员评论的邮箱, 必填',\n                    },\n                    {\n                        key: 'name',\n                        value: '评论昵称',\n                        placeholder: '管理员评论的昵称, 必填',\n                    },\n                    {\n                        key: 'mark',\n                        value: '评论标识',\n                        placeholder: '前台评论的管理员标识, 必填',\n                    },\n                    {\n                        key: 'comment',\n                        value: '评论通知',\n                        placeholder: '与评论邮箱一致的PASS, 只支持QQ邮箱',\n                    },\n                    {\n                        key: 'subscribe',\n                        value: '订阅通知',\n                        placeholder: '与评论邮箱一致的PASS, 只支持QQ邮箱',\n                    },\n                    {\n                        key: 'pass',\n                        value: '邮箱PASS',\n                        placeholder: '与邮箱一致的码, 在邮箱设置开启SMTP服务器可获取 (必填)',\n                        show: true\n                    },\n                ],\n                {\n                    image: '封面图',\n                    title: '标题',\n                    describe: '描述',\n                    date: '时间',\n                    link: '链接',\n                    color: '色调',\n                    icp_txt: '备案号',\n                    icp_link: '备案链接',\n                },\n                ['bucket', 'region', 'endPoint', 'accessKeySecret', 'accessKeyId', 'domain'],\n                {\n                    bg_mood: '文章列表',\n                    bg_letter: '短语列表',\n                    bg_subscribe: '订阅页面',\n                    bg_about: '个人介绍',\n                }\n            ],\n            form: {\n                cover: {},\n                upload_oss: {},\n                upload_type: '服务器',\n                bg: {},\n                email: {}\n            },\n            fullscreenLoading: false,\n\n            password: {}\n        }\n    },\n    watch: {\n        $info: {\n            handler(val) {\n                if(Object.keys(this.$info).length > 0){\n                    this.update()\n                }\n            },\n            immediate: true\n        }\n    },\n    computed: {\n        ...mapState(['$data']),\n        $info(){\n            return Object.keys(this.$data).length > 0 ? this.$data.info : {}\n        }\n    },\n    methods: {\n        update(){\n            for(let i in this.$info){\n                this.$set(this.form, i, this.$info[i])\n            }\n            const on = ['comment', 'subscribe'].some(i => this.$info.email[i] == true)\n            this.formList[1][6].show = !on\n        },\n        async onSubmit(){\n            /**\n             * 修改密码\n             */\n            if(Object.keys(this.password).length > 0){\n                if(!this.password['one']){\n                    this.$message.error('请输入原密码!')\n                    return;\n                }else if(!this.password['two']){\n                    this.$message.error('请填写新密码!')\n                    return\n                }\n\n                this.fullscreenLoading = true;\n\n                const result = await this.$http.post('/password', {password: this.password})\n                if(result.data.status === 2){\n                    this.fullscreenLoading = false;\n                    this.$message.error('原密码输入有误!')\n                    return;\n                }\n            }\n\n            this.fullscreenLoading = true;\n\n            /**\n             * 图片上传\n             */\n            const img = ['avatar', 'cover']\n            const upload = img.reduce((total, item) => {\n                if(this[item].url){\n                    total.push(new Promise((resolve, reject) => {\n                        \n                        this[item]['formData'].append('type', this.form.upload_type)\n\n                        // 默认添加页面填写的oss信息, 其他地方上传以获取数据库为主\n                        this[item]['formData'].append('upload_oss', JSON.stringify(this.form.upload_oss))\n\n                        this.$http.post('/upload', this[item].formData).then(res => {\n                            if(res.data.status == 100){\n                                this[item] = {};\n                                resolve({\n                                    type: item, \n                                    url: res.data.url\n                                })\n                            }else{\n                                reject()\n                            }\n                        }).catch(err => {\n                            reject(err)\n                        })\n                    }))\n                }\n                return total\n            }, [])\n\n            Promise.all(upload).then(res => {\n                if(res.length > 0){\n                    res.map(item => {\n                        if(item.type === 'avatar'){\n                            this.form['avatar'] = item.url\n                        }else{\n                            this.form.cover['image'] = item.url\n                        }\n                    })\n                }\n\n                // 提交信息\n                this.$http.post('/info', this.form).then(res => {\n                    if(res.data.status === 1){\n                        setTimeout(() => {\n                            this.$message({\n                                message: `更新成功`,\n                                type: 'success'\n                            });\n                            this.$store.commit('updataInfo', res.data.body)\n                            this.fullscreenLoading = false\n                            this.$router.push('/')\n                        }, 500)\n                    }\n                })\n            }).catch(err => {\n                this.fullscreenLoading = false\n                this.$message.error('图片上传失败，请检查网络是否正常 or OSS信息是否填写正确!')\n            })\n        },\n        emailChange(e){\n            // 邮箱通知\n            const on = ['comment', 'subscribe'].some(i => this.form.email[i] == true)\n            this.formList[1][6].show = !on\n        },\n        // 保存临时图片\n        upload(type, file){\n            if (!file.raw.type.includes('image')) {\n                this.$message.error('请选择图片格式的文件!')\n                return\n            }\n            const formData = new FormData();\n            formData.append('file', file.raw);            \n            this[type] = {\n                url: URL.createObjectURL(file.raw),\n                formData\n            }\n\n            if(type === 'avatar'){\n                this.form['avatar'] = URL.createObjectURL(file.raw)\n            }else{\n                this.form['cover']['image'] = URL.createObjectURL(file.raw)\n            }\n        },\n        avatarUpload(file){\n            this.upload('avatar', file)\n        },\n        coverUpload(file){\n            this.upload('cover', file)\n        },\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.avatar-uploader{\n    height: 100px;\n    /deep/ .el-upload{\n        height: 100px;\n        width: 100px;\n        overflow: hidden;\n        border: 4px solid #dce7ff;\n        border-radius: 50%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        i{\n            font-size: 30px;\n            color: #dcdfe6;\n        }\n        img{\n            width: 100%;\n        }\n    }\n}\n.cover{\n    overflow: hidden;\n    /deep/ .el-upload{\n        width: 300px;\n        height: 170px;\n        border-radius: 4px;\n        overflow: hidden;\n        border: 6px solid #dce7ff;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        img{\n            width: 100%;\n            height: 100%;\n            border-radius: 2px;\n        }\n        i{\n            font-size: 30px;\n            color: #dcdfe6;\n            vertical-align: middle;\n        }\n    }\n}\n.upload-image-size{\n    position: absolute;\n    top: 20px;\n    font-size: 12px;\n    right: calc(100% + 14px);\n    color: #b3b3b3;\n}\nh2.tit{\n    margin: 50px 0 30px;\n    span{\n        font-size: 12px;\n        color: #b3b3b3;\n    }\n}\n\n.el-popover {\n    p{\n        margin-bottom: 5px;\n    }\n    img{\n        width: 100%;\n        border-radius: 4px;\n    }\n}\n.submit:hover + .hint{\n    opacity: 1;\n}\n.hint{\n    font-size: 12px;\n    color: #ff4444;\n    margin-left: 10px;\n    letter-spacing: 2px;\n    opacity: 0;\n    transition: all .3s;\n}\n@media screen and (max-width: 600px) {\n    .cover{\n        /deep/ .el-upload{\n            width: 100%;\n        }\n    }\n    .hint{\n        opacity: 1;\n        display: block;\n    }\n    /deep/ .el-form-item{\n        label{\n            width: 90px !important;\n        }\n        .el-form-item__content{\n            margin-left: 90px !important;\n        }\n    }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./setting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./setting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./setting.vue?vue&type=template&id=3724e8f7&scoped=true&\"\nimport script from \"./setting.vue?vue&type=script&lang=js&\"\nexport * from \"./setting.vue?vue&type=script&lang=js&\"\nimport style0 from \"./setting.vue?vue&type=style&index=0&id=3724e8f7&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3724e8f7\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/cover.b5d33f25.png\";"],"sourceRoot":""}